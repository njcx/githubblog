Title: redis 未授权利用总结
Date: 2018-07-03 21:20
Modified: 2018-07-03 21:20
Category: 安全
Tags: redis exploit
Slug: L10
Authors: nJcx
Summary:  redis 未授权利用总结
Status: draft


#### 介绍

- redis 未授权公网访问
	- https://www.seebug.org/vuldb/ssvid-89715

#### 安装

Redis因配置不当可以未授权访问。攻击者无需认证访问到内部数据，可导致敏感信息泄露，也可以恶意执行flushall来清空所有数据。
攻击者可通过EVAL执行lua代码，或通过数据备份功能往磁盘写入后门文件。如果Redis以root身份运行，可以给root账户写入SSH公钥文件，直接通过SSH登录受害服务器。

#### 复现

一般通过yum install redis，要比自己编译安装的要安全的，所以
我们通过自己编译的redis来复现

```bash

wget http://download.redis.io/releases/redis-3.2.9.tar.gz && tar -xzvf redis-3.2.9.tar.gz && cd redis-3.2.9

make && make PREFIX=/usr/local/redis install && mkdir /usr/local/redis/etc/

cp redis.conf /usr/local/redis/etc/ && cd /usr/local/redis/bin/ && cp redis-benchmark redis-cli redis-server /usr/bin/

```

